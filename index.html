<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Trivia Practice</title>
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0f172a">
  <link rel="icon" href="icons/icon-192.png" sizes="192x192">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <style>
    :root{
      --bg:#0f172a; --card:#111827; --text:#e5e7eb; --accent:#22d3ee; --muted:#94a3b8; --right:#16a34a; --wrong:#dc2626;
    }
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--text);display:flex;align-items:center;justify-content:center}
    .app{width:100%;max-width:720px;padding:20px}
    .card{background:linear-gradient(180deg,#111827, #0b1220);border:1px solid #1f2937;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.35);padding:20px}
    header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
    header h1{font-size:20px;margin:0;letter-spacing:.4px}
    header .badge{font-size:12px;color:var(--muted)}
    .controls{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0 18px}
    button, select, input[type="text"], textarea{
      background:#0b1220;color:var(--text);border:1px solid #1f2937;border-radius:10px;padding:12px 14px;font-size:15px
    }
    button{cursor:pointer}
    button.primary{border-color:var(--accent)}
    button:disabled{opacity:.6}
    .q{font-size:18px;line-height:1.35;margin:8px 0 14px}
    .answers{display:grid;gap:10px}
    .answers button{display:flex;gap:10px;align-items:center;justify-content:space-between}
    .answers .letter{opacity:.75}
    .answers button.correct{border-color:var(--right)}
    .answers button.wrong{border-color:var(--wrong)}
    .meta{display:flex;justify-content:space-between;align-items:center;color:var(--muted);font-size:13px;margin-top:8px}
    .result{font-size:18px;margin:10px 0}
    .hidden{display:none!important}
    details{margin-top:16px}
    summary{cursor:pointer;color:var(--accent)}
    textarea{width:100%;min-height:120px}
    .toast{position:fixed;bottom:16px;left:50%;transform:translateX(-50%);background:#0b1220;border:1px solid #1f2937;border-radius:10px;padding:10px 14px;color:var(--text);opacity:0;transition:opacity .25s}
    .toast.show{opacity:1}
  </style>
</head>
<body>
  <div class="app">
    <div class="card">
      <header>
        <h1>Trivia Practice</h1>
        <div class="badge"><span id="badgeText">Ready</span></div>
      </header>

      <div class="controls">
        <select id="category"></select>
        <select id="count">
          <option value="5">5 Qs</option>
          <option value="10" selected>10 Qs</option>
          <option value="20">20 Qs</option>
        </select>
        <select id="mode">
          <option value="multiple" selected>Multiple choice</option>
          <option value="truefalse">True / False</option>
          <option value="mix">Mix</option>
        </select>
        <button id="startBtn" class="primary">Start</button>
        <button id="resetBtn">Reset</button>
      </div>

      <div id="quiz">
        <div class="meta">
          <div id="progress">0/0</div>
          <div id="score">Score: 0</div>
        </div>
        <div id="question" class="q"></div>
        <div id="answers" class="answers"></div>
        <div class="meta">
          <div id="feedback"></div>
          <div id="timer"></div>
        </div>
        <div class="result hidden" id="result"></div>
        <div class="controls">
          <button id="nextBtn" class="primary hidden">Next</button>
          <button id="endBtn" class="hidden">End</button>
        </div>
      </div>

      <details>
        <summary>➕ Add your own questions / import & export</summary>
        <p style="color:#cbd5e1;font-size:14px;margin-top:6px">Paste JSON (array of questions). Example is prefilled below. You can export your current bank too.</p>
        <textarea id="customJson"></textarea>
        <div class="controls">
          <button id="importBtn" class="primary">Import</button>
          <button id="exportBtn">Export</button>
          <button id="clearCustomBtn">Clear custom</button>
        </div>
      </details>

      <details>
        <summary>ℹ️ Help</summary>
        <ul style="color:#cbd5e1;line-height:1.5">
          <li>Tap Start to begin a session. Works offline once installed to your Home Screen.</li>
          <li>Use the category, count, and mode menus to customise a session.</li>
          <li>Add your own questions in “Add your own questions”.</li>
          <li>High score & your custom questions are stored locally on your device.</li>
        </ul>
      </details>
    </div>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script src="app.js"></script>
  <script>
    // register service worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js');
      });
    }
  </script>
</body>
</html>
